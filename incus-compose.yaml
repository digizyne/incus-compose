services:
  nginx:
    devices:
      proxies:
      - connect: tcp:0.0.0.0:80
        listen: tcp:127.0.0.1:8080
      - connect: tcp:0.0.0.0:443
        listen: tcp:127.0.0.1:443
    image: docker:nginx:latest
    volumes:
    - read_only: false
      source: custom_vol
      target: /var/www/html
      type: volume
    - read_only: true
      source: second_volume
      target: /etc/nginx
      type: volume
volumes:
  custom_vol:
    external: false
  second_volume:
    external: false
